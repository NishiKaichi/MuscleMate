{% extends "layout_login.html" %}

{% block title %}
  {{ user_info['username'] }}さんの筋トレページ
{% endblock %}

{% block contents %}
<style>
  .haiku-list{
    max-height: 400px; /*#高さを設定*/
    overflow-y: auto;
  }
  .haiku img {
    max-width: 100%; /* 画像の最大幅を設定 */
    max-height: 300px; /* 画像の最大高さを設定 */
    height: auto; /* 画像の高さを自動調整 */
  }
</style>

{{ user_info['username'] }}さんの筋トレページ

{% if user_info['id'] != current_user_id %}
<div class="box_c">
  {% if is_fav %}
  <form action="/remove_fav/{{ user_info['id'] }}" method="POST">
    <button type="submit" class="pure-button">お気に入り解除</button>
  </form>
  {% else %}
    <form action="/add_fav/{{ user_info['id'] }}" method="POST">
    <button type="submit" class="pure-button">お気に入り追加</button>
  </form>
  {% endif %}
</div>
{% endif %}

<h3>投稿</h3>

{% if haikus | length == 0 %}
  投稿はまだありません。
{% else %}
  <div class="haiku-list">
    {% for haiku in haikus %}
      <div class="haiku">
        {{ haiku.content | linebreaks }}
        {% if haiku.image_path %}
        <br><img src="{{ url_for('static', filename='uploads/' ~ haiku.image_path) }}" alt="Image">
        {% endif %}
        <p class="info">{{ haiku.timestamp | datestr }}</p>
        <form action="/toggle_like/{{ haiku.id }}" method="post" style="display:inline;">
          {% if haiku.liked_by_me %}
          <button type="submit">いいねを取り消す</button>
          {% else %}
          <button type="submit">いいね</button>
          {% endif %}
        </form>
        <span>{{ haiku.like_count }} いいね</span>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% endblock %}
